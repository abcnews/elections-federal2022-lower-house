@import '../../constants.scss';

// TappableLayer enum

$TappableLayer_Electorates: 0;

// Focus management

$opacityUnfocused: 0.05;
$opacityUnfocusedInspecting: 0.5;
$focusChangeTransitionDuration: 0.5s;

@mixin fadedOutTransitionable {
  transition: opacity $focusChangeTransitionDuration;
}

@mixin fadedOut {
  opacity: $opacityUnfocused;
}

@mixin fadedOutInspecting {
  opacity: $opacityUnfocusedInspecting;
  transition: opacity 0s;
}

// Styles

.root {
  position: relative;
  width: 100%;
  height: 0;
  padding: 0;
  /* padding-bottom will be defined by JS */
}

@media (orientation: landscape) and (max-height: 50rem) {
  .root {
    padding-bottom: 0 !important;
    height: 32rem;
  }
}

@media (orientation: landscape) and (max-height: 25rem) {
  .root {
    padding-bottom: 0 !important;
    height: 16rem;
  }
}

.svg {
  position: absolute;
  height: 100%;
  width: 100%;
  left: 0;
  top: 0;
}

.countryOuter {
  stroke: $color_Grey;
  stroke-width: $swLight;
  fill: none;
  @include fadedOutTransitionable;

  @media (max-width: 667px) {
    stroke-width: $swLight_SM;
  }
}

.root[data-has-focuses] .countryOuter {
  @include fadedOut;
}

.root[data-has-focuses][data-is-inspecting] .countryOuter {
  @include fadedOutInspecting;
}

.countryInner {
  stroke: none;
  fill: rgba(0, 0, 0, 0.025);
}

.groupsBackgrounds {
  pointer-events: none;
  shape-rendering: crispEdges;
}

.root[data-tappable='#{$TappableLayer_Electorates}'] .groupsBackgrounds {
  pointer-events: all;
}

.groupBackground {
  @include fadedOutTransitionable;
}

.root[data-has-focuses] .groupBackground[data-focus='#{$Focus_No}'] {
  @include fadedOut;
}

.root[data-has-focuses][data-is-inspecting] .groupBackground[data-focus='#{$Focus_No}'] {
  @include fadedOutInspecting;
}

.groupBackgroundPath {
  fill: $color_White;
  stroke: none;
  stroke-width: $swHeavy;
  transition: fill $allocationTransitionDuration;

  @media (max-width: 667px) {
    stroke-width: $swHeavy_SM;
  }
}

.groupBackgroundPath[data-allocation] {
  fill: var(--color-allocation);
}

@keyframes flipAllocations {
  0% {
    fill: $color_White;
    stroke: var(--color-relative-allocation);
    transform: none;
  }
  49.99% {
    fill: $color_White;
    stroke: var(--color-relative-allocation);
    transform: rotateY(90deg);
  }
  50% {
    fill: var(--color-allocation);
    stroke: none;
    transform: rotateY(-90deg);
  }
  100% {
    fill: var(--color-allocation);
    stroke: none;
    transform: none;
  }
}

.groupBackgroundPath[data-should-flip] {
  animation: flipAllocations $allocationTransitionDuration linear 1 both;
}

.groupBackgroundTarget {
  stroke: none;
  fill: none;
}

.root[data-is-interactive][data-tappable='#{$TappableLayer_Electorates}'] .groupBackgroundTarget {
  cursor: pointer;
}

.groupsBorders {
  pointer-events: none;
}

.groupBorder {
  @include fadedOutTransitionable;
}

.root[data-has-focuses] .groupBorder[data-focus='#{$Focus_No}'] {
  @include fadedOut;
}

.root[data-has-focuses][data-is-inspecting] .groupBorder[data-focus='#{$Focus_No}'] {
  @include fadedOutInspecting;
}

.groupBorderPath {
  fill: none;
  stroke: $color_Grey;
  stroke-width: $swLight;

  @media (max-width: 667px) {
    stroke-width: $swLight_SM;
  }
}

.groupBorderPath[data-focus='#{$Focus_No}'][data-has-allocation],
.groupBorderPath[data-focus='#{$Focus_Yes}'] {
  stroke: var(--color-focus);
}

.groupBorderPath[data-focus='#{$Focus_Yes}'] {
  stroke-width: $swHeavy;

  @media (max-width: 667px) {
    stroke-width: $swHeavy_SM;
  }
}

.groupBorderPath[data-focus='#{$Focus_Yes}'][data-relative-allocation] {
  stroke: var(--color-relative-allocation);
}

.groupBorderPath[data-focus='#{$Focus_Yes}'][data-has-definitive-allocation] {
  stroke: none;
}

.groupBorderPath[data-focus='#{$Focus_Yes}'][data-was-preserved] {
  stroke: var(--color-allocation);
}

.groupBorderTarget {
  stroke: none;
  fill: none;
}

.groupsPartitions {
  pointer-events: none;
  opacity: 0;
}

.root[data-has-focuses] .groupsPartitions {
  opacity: 1;
}

.groupPartition {
  fill: none;
  stroke: none;
  stroke-width: $swLight;

  @media (max-width: 667px) {
    stroke-width: $swLight_SM;
  }
}

.groupPartition[data-focus='#{$Focus_Yes}'],
.groupPartition[data-focus='#{$Focus_No}'][data-has-definitive-allocation] {
  stroke: $color_BG;
}

.root[data-has-focuses] .groupPartition[data-focus='#{$Focus_No}'] {
  stroke: none;
}

.labels {
  pointer-events: none;
}

.label {
  text-anchor: middle;
  font-size: 1rem;
  @include fadedOutTransitionable;

  @media (max-width: 667px) {
    transform: translate(0, 0.25rem);
    font-size: 1.5rem;
  }
}

.root[data-has-focuses] .label[data-focus='#{$Focus_No}'] {
  opacity: 0;
}

.root[data-has-focuses][data-is-inspecting] .label[data-focus='#{$Focus_No}'] {
  @include fadedOutInspecting;
  opacity: 1;
}

.label > * {
  text-anchor: middle;
  font-size: 1.5rem;

  @media (min-width: 668px) {
    font-size: 1rem;
  }
}

.labelText {
  fill: $color_Text;
}

.label[data-has-definitive-allocation] > .labelText {
  fill: $color_BG;
}
